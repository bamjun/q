#!/bin/bash

# git branch -a 명령어로 브랜치 목록 가져오기
branches=$(git branch -a | sed 's/^..//')

# 브랜치 목록을 배열로 변환
IFS=$'\n' read -r -d '' -a branch_array <<< "$branches"

# 브랜치 목록을 번호와 함께 출력 (1번부터 시작)
echo "Select a branch to switch to:"
for i in "${!branch_array[@]}"; do
  echo "$((i + 1))) ${branch_array[$i]}"
done

# 사용자 입력 받기
read -p "Enter the number of the branch: " branch_number

# 유효한 번호인지 확인
if ! [[ "$branch_number" =~ ^[0-9]+$ ]] || [ "$branch_number" -lt 1 ] || [ "$branch_number" -gt "${#branch_array[@]}" ]; then
  echo "Invalid branch number."
  exit 1
fi

# 선택한 번호에 해당하는 브랜치로 switch
selected_branch="${branch_array[$((branch_number - 1))]}"
git switch "${selected_branch#remotes/}"

echo "Switched to branch $selected_branch"
